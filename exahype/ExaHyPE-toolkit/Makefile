# This is a makefile for Peano's StorageSchemes component
# generated by the Peano Development Tools (PDT) 

# Include files
-include files.mk



OBJECTS=$(SOURCES:.java=.class)


default: 
	@echo ExaHyPE toolkit makefile
	@echo ------------------------
	@echo 
	@echo Supported targets then are
	@echo   clean
	@echo   createParser
	@echo   compile
	@echo   dist
	@echo   all


clean:
	rm -f $(OBJECTS)
	rm -f files.mk
	rm -f ../dist/ExaHyPE.jar
	rm -rf eu/exahype/node


createParser:
	java -jar ../lib/sablecc.jar -d . ../exahype.grammar 
	rm -f files.mk


compile: files.mk $(OBJECTS) 

jar:
	jar cmf ./Manifest.txt ExaHyPE.jar .

dist:
	jar cmf ./Manifest.txt ExaHyPE.jar .
	mv ExaHyPE.jar ../dist
	tar -czf ../dist/ExaHyPE-toolkit.tar.gz --exclude=*.class Manifest.txt Makefile eu 


all: clean createParser compile dist


files.mk:
	@touch files.mk
	@echo "SOURCES=\\" > files.mk
	find . -name '*.java' | tr '\n' ' ' >> files.mk



$(OBJECTS): %.class : %.java
	javac -sourcepath . $<  


